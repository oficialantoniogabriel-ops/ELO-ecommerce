<!DOCTYPE html>
<html lang="pt-AO">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Planos Premium - ELO Commerce</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background:#000; color:#f5f5f5; font-family:"Poppins",sans-serif; }
    .navbar { background: linear-gradient(90deg,#b8860b 0%,#000 100%); }
    .navbar-brand { color:#fff !important; font-weight:700; }
    .card {
      background:#111; border:1px solid #222; border-radius:15px;
      box-shadow:0 0 12px rgba(255,215,0,0.15);
      color:#fff; transition:0.3s;
    }
    .card:hover { transform:scale(1.03); box-shadow:0 0 25px rgba(255,215,0,0.3); }
    .btn-gold {
      background-color:#b8860b; border:none; color:#fff;
      border-radius:25px; font-weight:600; transition:0.3s;
    }
    .btn-gold:hover { background-color:#ffcc00; color:#000; }
    h2.text-warning { text-shadow:0 0 6px #b8860b; }
  </style>
</head>
<body>

<nav class="navbar navbar-dark fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="painel.html">⚜️ ELO Commerce</a>
    <button id="logoutBtn" class="btn btn-outline-light">Sair</button>
  </div>
</nav>

<div class="container" style="margin-top:90px;">
  <h2 class="text-warning text-center mb-4">Escolha o Seu Plano Premium</h2>

  <div class="row g-4 text-center">
    <div class="col-md-4">
      <div class="card p-3">
        <h4 class="text-warning">Plano Bronze</h4>
        <p>Acesso básico às funcionalidades principais.</p>
        <h5 class="text-light">2.000 Kz / mês</h5>
        <button class="btn-gold w-100 mt-2" onclick="assinarPlano('Bronze',2000)">Assinar</button>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card p-3">
        <h4 class="text-warning">Plano Prata</h4>
        <p>Inclui recursos extras e destaque em vendas.</p>
        <h5 class="text-light">5.000 Kz / mês</h5>
        <button class="btn-gold w-100 mt-2" onclick="assinarPlano('Prata',5000)">Assinar</button>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card p-3">
        <h4 class="text-warning">Plano Ouro</h4>
        <p>Todos os benefícios + suporte premium e loja verificada.</p>
        <h5 class="text-light">10.000 Kz / mês</h5>
        <button class="btn-gold w-100 mt-2" onclick="assinarPlano('Ouro',10000)">Assinar</button>
      </div>
    </div>
  </div>

  <div id="msg" class="text-center mt-4"></div>
</div>

<footer class="text-center mt-5 py-3 bg-black text-secondary">
  &copy; 2025 ELO Commerce. Todos os direitos reservados.
</footer>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
  import { getFirestore, setDoc, doc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAN_7vyt0XcOt6NvOE6MDoBCajUjhToCR0",
    authDomain: "elo-ecommerce-ecd87.firebaseapp.com",
    projectId: "elo-ecommerce-ecd87",
    storageBucket: "elo-ecommerce-ecd87.appspot.com",
    messagingSenderId: "375574231770",
    appId: "1:375574231770:web:78279cb6aac72c454703e3"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const msg = document.getElementById("msg");

  onAuthStateChanged(auth, (user) => {
    if (!user) window.location.href = "login.html";
  });

  document.getElementById("logoutBtn").addEventListener("click", async () => {
    await signOut(auth);
    window.location.href = "login.html";
  });

  // Assinar plano
  async function assinarPlano(nome, preco) {
    const user = auth.currentUser;
    if (!user) return alert("Faça login para continuar.");

    try {
      await setDoc(doc(db, "assinaturas", user.email), {
        email: user.email,
        plano: nome,
        preco: preco,
        ativo: true,
        metodoPagamento: "Manual",
        dataInicio: serverTimestamp()
      });

      msg.innerHTML = `<div class='alert alert-success mt-3'>
        ✅ Assinatura do plano <strong>${nome}</strong> registrada com sucesso!
      </div>`;
    } catch (err) {
      msg.innerHTML = `<div class='alert alert-danger mt-3'>Erro: ${err.message}</div>`;
    }
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
